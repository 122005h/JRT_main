module.exports.config = {
    name: "rankgif",
    version: "1.0.0",
    hasPermssion: 0,
    credits: "Siêu Đáng Yêu",
    description: "Lấy rank hiện tại của bạn trên hệ thống bot kèm khung theo level của bạn, remake rank_card from canvacord",
    commandCategory: "Nhóm",
    cooldowns: 5,
    dependencies: {
        "fs-extra": "",
        "path": "",
        "jimp": "",
        "node-superfetch": "",
        "canvas": "",
        "gif-frames": "",
        "gifencoder": "",
    }
};
//random color 
function getRandomColor() {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}

module.exports.makeRankCard = async(data) => {
    /*
     * 
     * Remake from Canvacord
     * 
     */

    const _0x3ecdb0=_0xd5b7;(function(_0x123beb,_0x5c0a60){const _0x297c1a=_0xd5b7,_0x3f9a2a=_0x123beb();while(!![]){try{const _0x109c06=parseInt(_0x297c1a(0xc1))/0x1*(-parseInt(_0x297c1a(0xa2))/0x2)+parseInt(_0x297c1a(0xcc))/0x3*(-parseInt(_0x297c1a(0xc2))/0x4)+parseInt(_0x297c1a(0xbc))/0x5+parseInt(_0x297c1a(0xae))/0x6+-parseInt(_0x297c1a(0xba))/0x7+-parseInt(_0x297c1a(0xb7))/0x8+parseInt(_0x297c1a(0xca))/0x9;if(_0x109c06===_0x5c0a60)break;else _0x3f9a2a['push'](_0x3f9a2a['shift']());}catch(_0x4edfcd){_0x3f9a2a['push'](_0x3f9a2a['shift']());}}}(_0x1953,0x6e2f6));var _0xfccf=[_0x3ecdb0(0xab),_0x3ecdb0(0xc9),'path','canvas',_0x3ecdb0(0xd0),_0x3ecdb0(0xce),_0x3ecdb0(0xcb),_0x3ecdb0(0xc7),'resolve','PI','/bold-font.ttf',_0x3ecdb0(0xa9),'regular',_0x3ecdb0(0xcf),_0x3ecdb0(0xbb),_0x3ecdb0(0xd1),_0x3ecdb0(0xb0),_0x3ecdb0(0xac),_0x3ecdb0(0xaf),_0x3ecdb0(0xaa),_0x3ecdb0(0xb4),_0x3ecdb0(0xcd),_0x3ecdb0(0xc5),'',_0x3ecdb0(0xc8),'map','split','/','loadImage',_0x3ecdb0(0xbe),_0x3ecdb0(0xc3),'/picture?width=512&height=512&access_token=170440784240186|bc82258eaaf93ee5b9f577a8d401bfc9',_0x3ecdb0(0xb1),_0x3ecdb0(0xc6),_0x3ecdb0(0xb8),_0x3ecdb0(0xb2),'2d',_0x3ecdb0(0xa4),_0x3ecdb0(0xb3),_0x3ecdb0(0xb6),_0x3ecdb0(0xbd),'font','bold\x2036px\x20Manrope',_0x3ecdb0(0xa5),_0x3ecdb0(0xb9),_0x3ecdb0(0xad),_0x3ecdb0(0xbf),_0x3ecdb0(0xa1),_0x3ecdb0(0xa8),'bold\x2032px\x20Manrope',_0x3ecdb0(0xa3),_0x3ecdb0(0xc0),_0x3ecdb0(0xc4),'#','bold\x2026px\x20Manrope','/\x20','beginPath','arc',_0x3ecdb0(0xb5),_0x3ecdb0(0xa7),'toBuffer',_0x3ecdb0(0xa6)];const fs=global[_0xfccf[0x1]][_0xfccf[0x0]],path=global[_0xfccf[0x1]][_0xfccf[0x2]],Canvas=global[_0xfccf[0x1]][_0xfccf[0x3]],request=global[_0xfccf[0x1]][_0xfccf[0x4]],GIFEncoder=global[_0xfccf[0x1]][_0xfccf[0x5]],gifFrames=global[_0xfccf[0x1]][_0xfccf[0x6]],__root=path[_0xfccf[0x8]](__dirname,_0xfccf[0x7]),PI=Math[_0xfccf[0x9]],{id,name,rank,level,expCurrent,expNextLevel}=data;Canvas[_0xfccf[0xe]](__root+_0xfccf[0xa],{'family':_0xfccf[0xb],'weight':_0xfccf[0xc],'style':_0xfccf[0xd]}),Canvas[_0xfccf[0xe]](__root+_0xfccf[0xf],{'family':_0xfccf[0xb],'weight':_0xfccf[0x10],'style':_0xfccf[0xd]});const pathCustom=path[_0xfccf[0x8]](__dirname,_0xfccf[0x7],_0xfccf[0x11]);function _0xd5b7(_0x293ae5,_0x26f25c){const _0x195311=_0x1953();return _0xd5b7=function(_0xd5b72c,_0x3b50cf){_0xd5b72c=_0xd5b72c-0xa1;let _0x1351d6=_0x195311[_0xd5b72c];return _0x1351d6;},_0xd5b7(_0x293ae5,_0x26f25c);}var customDir=fs[_0xfccf[0x12]](pathCustom);let random=Math[_0xfccf[0x14]](Math[_0xfccf[0x13]]()*0x17)+0x1;var dirImage=__root+_0xfccf[0x15]+random+_0xfccf[0x16];customDir=customDir[_0xfccf[0x19]](_0x166879=>{return _0x166879[_0xfccf[0x18]](/\.png/g,_0xfccf[0x17]);});for(singleLimit of customDir){var limitRate=![];const split=singleLimit[_0xfccf[0x1a]](/-/g);var min=parseInt(split[0x0]),max=parseInt(split[0x1]?split[0x1]:min);for(;min<=max;min++){if(level==min){limitRate=!![];break;}};if(limitRate==!![]){dirImage=pathCustom+(''+_0xfccf[0x1b]+singleLimit+_0xfccf[0x16]);break;}};let rankCard=await Canvas[_0xfccf[0x1c]](dirImage);const pathImg=__root+(''+_0xfccf[0x1d]+id+_0xfccf[0x16]);var expWidth=expCurrent*0x267/expNextLevel;expWidth>0x267-18.5&&(expWidth=0x267-18.5);function _0x1953(){const _0x2b63ed=['node-superfetch','/vnexotic.ttf','36px\x20Manrope','196380DHJHUC','end','getContext','fillStyle','writeFileSync','fillRect','center','Manrope','random','fs-extra','customrank','start','2675370Batqic','readdirSync','bold','get','createCanvas','width','floor','fill','height','2547336huEHxj','circle','textAlign','5021576Cbfgrg','registerFont','1844450VBCWXW','drawImage','/rank_','fillText','Lv.','8MjRaTC','28252lqOLNL','https://graph.facebook.com/','measureText','.png','body','cache','replace','nodemodule','14963985UZmkKA','gif-frames','87USIQQX','/rankcard','gifencoder','normal'];_0x1953=function(){return _0x2b63ed;};return _0x1953();};let avatar=await request[_0xfccf[0x20]](''+_0xfccf[0x1e]+id+_0xfccf[0x1f]);avatar=await this[_0xfccf[0x22]](avatar[_0xfccf[0x21]]);const canvas=Canvas[_0xfccf[0x23]](0x3a6,0x11a),ctx=canvas[_0xfccf[0x25]](_0xfccf[0x24]);ctx[_0xfccf[0x28]](rankCard,0x0,0x0,canvas[_0xfccf[0x26]],canvas[_0xfccf[0x27]]),ctx[_0xfccf[0x28]](await Canvas[_0xfccf[0x1c]](avatar),0x2d,0x32,0xb4,0xb4),ctx[_0xfccf[0x29]]=''+_0xfccf[0x2a],ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x2c]]=_0xfccf[0x2d],ctx[_0xfccf[0x2e]](name,0x10e,0xa4),ctx[_0xfccf[0x29]]=''+_0xfccf[0x2f],ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x2c]]=_0xfccf[0x30],ctx[_0xfccf[0x29]]=''+_0xfccf[0x31],ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x2c]]=_0xfccf[0x32],ctx[_0xfccf[0x2e]](level,0x3a6-0x37,0x52),ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x2e]](_0xfccf[0x33],0x3a6-0x37-ctx[_0xfccf[0x34]](level)[_0xfccf[0x26]]-0xa,0x52),ctx[_0xfccf[0x29]]=''+_0xfccf[0x31],ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x2c]]=_0xfccf[0x32],ctx[_0xfccf[0x2e]](rank,0x3a6-0x37-ctx[_0xfccf[0x34]](level)[_0xfccf[0x26]]-0x10-ctx[_0xfccf[0x34]](''+_0xfccf[0x33])[_0xfccf[0x26]]-0x19,0x52),ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x2e]](_0xfccf[0x35],0x3a6-0x37-ctx[_0xfccf[0x34]](level)[_0xfccf[0x26]]-0x10-ctx[_0xfccf[0x34]](''+_0xfccf[0x33])[_0xfccf[0x26]]-0x10-ctx[_0xfccf[0x34]](rank)[_0xfccf[0x26]]-0x10,0x52),ctx[_0xfccf[0x29]]=''+_0xfccf[0x36],ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x2c]]=_0xfccf[0x2d],ctx[_0xfccf[0x2e]](_0xfccf[0x37]+expNextLevel,0x2c6+ctx[_0xfccf[0x34]](expCurrent)[_0xfccf[0x26]]+0xa,0xa4),ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x2e]](expCurrent,0x2c6,0xa4),ctx[_0xfccf[0x38]](),ctx[_0xfccf[0x2b]]=getRandomColor(),ctx[_0xfccf[0x39]](0x101+18.5,147.5+18.5+36.25,18.5,1.5*PI,0.5*PI,!![]),ctx[_0xfccf[0x3a]](),ctx[_0xfccf[0x3b]](0x101+18.5,147.5+36.25,expWidth,37.5),ctx[_0xfccf[0x39]](0x101+18.5+expWidth,147.5+18.5+36.25,18.75,1.5*PI,0.5*PI,![]),ctx[_0xfccf[0x3a]]();const imageBuffer=canvas[_0xfccf[0x3c]]();fs[_0xfccf[0x3d]](pathImg,imageBuffer);return pathImg;
